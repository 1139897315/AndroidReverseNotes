**本工程目标——通过本工程 click 事件来打开微信并获取微信附近的人信息**

<img src="image/nearby.png" width="280px" height="500px"/>

**本工程基于[微信7.0.4版本源码](./docs/weixin_7.0.4_source)**

**思路分析:**

1. 通过Xposed hook 本工程的click事件并在 afterHookedMethod 方法内执行打开微信的方法；

2. hook微信，当微信打开后，接着执行打开**附近的人**的方法；

3. 根据微信逆向的代码找到**附近的人**的类相关方法并hook，从而获取到对应的附近人列表并保存；

**缺点解析:**

1. hook事件一旦生效无法有效的控制，即使不通过本工程click事件，单独打开微信依然会继续执行**思路2及后续操作**；

2. 为了控制上述缺点1，必须设置一个有效的标记，让hook微信事件只有在本工程click后生效，但是涉及到双进程的问题，状态无法共享，所以本工程做了一个文本标记；

3. 频繁的N次的读取文本，想想都是不可靠的，所以本工程方案是不[可取](../XposedHookWeiXin3)的；






